{"config":{"lang":["en"],"separator":"[\\s\\u200b\\-_,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"[ k C n ]  \ud83c\udfe0  homelab","text":"<p>\"The cloud is just someone else's computer\" \u2013 Ancient IT Proverb</p>"},{"location":"#quick-links","title":"\ud83d\udd17 Quick Links","text":"<ul> <li> Service Status</li> <li> Docker Compose Repository</li> <li> My Home Page</li> </ul>"},{"location":"#whats-this-all-about","title":"\ud83d\udc49 What's This All About?","text":"<p>Hello and welcome! This is my personal homelab documentation \u2013 a living knowledge base where I'm trying to document everything from infrastructure setup to those 3 AM debugging sessions that teach you way too much about Docker networking.</p> <p></p>"},{"location":"#why-self-host","title":"\ud83e\udd14 Why Self-Host?","text":"<p>Reasons I run a homelab:</p> <ol> <li>Fun \u2013 Because it's actually so enjoyable</li> <li>Curiosity - It's amazing to see how things work</li> <li>Learning \u2013 Best way to understand infrastructure</li> <li>Privacy \u2013 My data stays on my hardware</li> <li>Control \u2013 I decide when things update (or break)</li> <li>Cost \u2013 Cloud bills add up fast, even faster than electricity ones</li> </ol>"},{"location":"#the-setup","title":"\ud83c\udfd7\ufe0f The Setup","text":""},{"location":"#documentation-sections","title":"\ud83d\udcc2 Documentation Sections","text":"<ul> <li>\ud83d\udda7 Infrastructure -  Hardware setup,  network configuration</li> <li>\u23fb Provisioning -  VM and  bare-metal deployment workflows</li> <li>\u26ef Applications -  Docker compose,  k8s manifests, \u26ed service configs</li> <li>\u27a4 Automation -  Playbooks,  workflows, infrastructure as code</li> <li>\ud83d\udd6e Troubleshooting -  Common issues and their solutions</li> </ul>"},{"location":"infrastructure/home/","title":"Home Infrastructure","text":""},{"location":"linux/4-Arch-btw/","title":"Arch Linux Installation Guide","text":"<p>This guide covers everything from initial disk encryption with LUKS through to a fully functional desktop environment with i3 window manager, audio, Bluetooth, power management, and media playback inhibitors. </p> <p>This is a minimalist configuration tailored for my laptop, designed to use as little RAM as possible \u2014 full operational under 400MB after boot. Everything is systemd-based, including WiFi management (iwd), ensuring a lean and efficient system.</p> <p></p> <ul> <li>\u2705 Full disk encryption (LUKS) and automatic decryption with keyfiles</li> <li>\u2705 i3 window manager</li> <li>\u2705 Alacritty terminal</li> <li>\u2705 Brave with GPU acceleration</li> <li>\u2705 Audio (PipeWire)</li> <li>\u2705 Bluetooth</li> <li>\u2705 WiFi</li> <li>\u2705 Power management</li> <li>\u2705 Few modern tools and utilities</li> </ul>"},{"location":"linux/4-Arch-btw/#pre-installation","title":"Pre-Installation","text":""},{"location":"linux/4-Arch-btw/#identify-current-mounts","title":"Identify Current Mounts","text":"<pre><code>findmnt /\nfindmnt /boot/efi\n</code></pre>"},{"location":"linux/4-Arch-btw/#partition-disk","title":"Partition Disk","text":"<pre><code>sudo cfdisk /dev/sda\n</code></pre>"},{"location":"linux/4-Arch-btw/#verify-disk-layout","title":"Verify Disk Layout","text":"<pre><code>lsblk -f\n</code></pre>"},{"location":"linux/4-Arch-btw/#arch-iso-environment","title":"Arch ISO Environment","text":""},{"location":"linux/4-Arch-btw/#connect-to-wifi","title":"Connect to WiFi","text":"<pre><code>iwctl \ndevice list\nstation wlan0 connect [your_wifi_name]\nexit\n</code></pre>"},{"location":"linux/4-Arch-btw/#verify-network-connection","title":"Verify Network Connection","text":"<pre><code>ip a\nping 192.168.0.1\n</code></pre>"},{"location":"linux/4-Arch-btw/#set-root-password","title":"Set Root Password","text":"<pre><code>passwd\n</code></pre>"},{"location":"linux/4-Arch-btw/#enable-ssh-server","title":"Enable SSH Server","text":"<pre><code>systemctl status sshd\n</code></pre>"},{"location":"linux/4-Arch-btw/#ssh-connection-optional","title":"SSH Connection (Optional)","text":"<p>Connect from another machine for easier copy-paste: <pre><code>ssh root@&lt;IP-ADDRESS&gt;\n</code></pre></p>"},{"location":"linux/4-Arch-btw/#disk-partitioning","title":"Disk Partitioning","text":""},{"location":"linux/4-Arch-btw/#partition-scheme","title":"Partition Scheme","text":"<pre><code>cfdisk\n\nsda 8:0 0 119.2G 0 disk  \n\u251c\u2500sda1 8:1 0 100M 0 part /boot/efi  \n\u251c\u2500sda2 8:2 0 21G 0 part  /\n\u251c\u2500sda3 8:3 0 25.6G 0 part /home\n</code></pre>"},{"location":"linux/4-Arch-btw/#load-encryption-modules","title":"Load Encryption Modules","text":"<pre><code>modprobe dm-crypt  \nmodprobe dm-mod\n</code></pre>"},{"location":"linux/4-Arch-btw/#encrypt-partitions-with-luks","title":"Encrypt Partitions with LUKS","text":"<pre><code># Encrypt root partition\ncryptsetup luksFormat -v -s 512 -h sha512 /dev/sda2\n\n# Encrypt home partition\ncryptsetup luksFormat -v -s 512 -h sha512 /dev/sda3\n</code></pre>"},{"location":"linux/4-Arch-btw/#open-and-format-encrypted-partitions","title":"Open and Format Encrypted Partitions","text":"<pre><code># Open the root partition\ncryptsetup open /dev/sda2 cryptroot\n\n# Open the home partition\ncryptsetup open /dev/sda3 crypthome\n\n# Format root partition\nmkfs.ext4 /dev/mapper/cryptroot\n\n# Format home partition\nmkfs.ext4 /dev/mapper/crypthome\n</code></pre>"},{"location":"linux/4-Arch-btw/#mount-partitions","title":"Mount Partitions","text":"<pre><code># Mount root to /mnt\nmount /dev/mapper/cryptroot /mnt\n\n# Create and mount home directory\nmkdir /mnt/home\nmount /dev/mapper/crypthome /mnt/home\n\n# Create and mount EFI boot partition\nmkdir -p /mnt/boot/efi\nmount /dev/sda1 /mnt/boot/efi\n</code></pre>"},{"location":"linux/4-Arch-btw/#base-system-installation","title":"Base System Installation","text":""},{"location":"linux/4-Arch-btw/#install-base-packages","title":"Install Base Packages","text":"<pre><code>pacstrap -K /mnt base linux-lts linux-firmware intel-ucode\n</code></pre>"},{"location":"linux/4-Arch-btw/#generate-filesystem-table-fstab","title":"Generate Filesystem Table (FSTAB)","text":"<pre><code>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab\n</code></pre>"},{"location":"linux/4-Arch-btw/#enter-new-system-chroot","title":"Enter New System (Chroot)","text":"<pre><code>arch-chroot /mnt /bin/bash\n</code></pre>"},{"location":"linux/4-Arch-btw/#system-configuration","title":"System Configuration","text":""},{"location":"linux/4-Arch-btw/#install-text-editor","title":"Install Text Editor","text":"<pre><code>pacman -S neovim\n</code></pre>"},{"location":"linux/4-Arch-btw/#configure-initramfs-for-encryption","title":"Configure Initramfs for Encryption","text":"<p>Edit mkinitcpio configuration: <pre><code>nvim /etc/mkinitcpio.conf\n</code></pre></p> <p>Find the <code>HOOKS=(...)</code> line and change it to: <pre><code>HOOKS=(base systemd autodetect modconf kms keyboard sd-vconsole block sd-encrypt filesystems fsck)\n</code></pre></p> <p>Key hooks explained: - <code>systemd</code> \u2013 replaces <code>udev</code>, orchestrates boot process in RAM - <code>sd-vconsole</code> \u2013 replaces <code>keymap</code> and <code>consolefont</code>, reads <code>/etc/vconsole.conf</code> for keyboard layout - <code>sd-encrypt</code> \u2013 systemd-based LUKS encryption support</p>"},{"location":"linux/4-Arch-btw/#set-keyboard-layout","title":"Set Keyboard Layout","text":"<pre><code>echo \"KEYMAP=pl\" &gt; /etc/vconsole.conf\n</code></pre>"},{"location":"linux/4-Arch-btw/#generate-kernel-image","title":"Generate Kernel Image","text":"<pre><code>mkinitcpio -P\n</code></pre>"},{"location":"linux/4-Arch-btw/#bootloader-grub","title":"Bootloader (GRUB)","text":""},{"location":"linux/4-Arch-btw/#install-grub","title":"Install GRUB","text":"<pre><code>pacman -S grub efibootmgr os-prober\n</code></pre>"},{"location":"linux/4-Arch-btw/#get-root-partition-uuid","title":"Get Root Partition UUID","text":"<pre><code>blkid -s UUID -o value /dev/sda2\n</code></pre>"},{"location":"linux/4-Arch-btw/#configure-grub","title":"Configure GRUB","text":"<p>Edit <code>/etc/default/grub</code>: <pre><code>nvim /etc/default/grub\n</code></pre></p> <p>Set the following lines: <pre><code>GRUB_CMDLINE_LINUX_DEFAULT=\"loglevel=3 quiet rd.luks.name=YOUR-UUID-SDA2=cryptroot root=/dev/mapper/cryptroot rw\"\nGRUB_DISABLE_OS_PROBER=false\n</code></pre></p>"},{"location":"linux/4-Arch-btw/#install-grub-to-efi","title":"Install GRUB to EFI","text":"<pre><code>grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=ARCH --recheck\n</code></pre>"},{"location":"linux/4-Arch-btw/#generate-grub-configuration","title":"Generate GRUB Configuration","text":"<pre><code>grub-mkconfig -o /boot/grub/grub.cfg\n</code></pre>"},{"location":"linux/4-Arch-btw/#automatic-decryption-keyfiles","title":"Automatic Decryption (Keyfiles)","text":""},{"location":"linux/4-Arch-btw/#set-permissions-and-generate-keys","title":"Set Permissions and Generate Keys","text":"<pre><code>chmod 700 /etc/cryptsetup-keys.d\n\n# Generate key for ROOT (sda2)\ndd if=/dev/urandom of=/etc/cryptsetup-keys.d/root.key bs=512 count=4\nchmod 600 /etc/cryptsetup-keys.d/root.key\ncryptsetup luksAddKey /dev/sda2 /etc/cryptsetup-keys.d/root.key\n\n# Generate key for HOME (sda3)\ndd if=/dev/urandom of=/etc/cryptsetup-keys.d/home.key bs=512 count=4\nchmod 600 /etc/cryptsetup-keys.d/home.key\ncryptsetup luksAddKey /dev/sda3 /etc/cryptsetup-keys.d/home.key\n</code></pre>"},{"location":"linux/4-Arch-btw/#add-root-key-to-initramfs","title":"Add Root Key to Initramfs","text":"<p>Edit <code>/etc/mkinitcpio.conf</code>: <pre><code>nvim /etc/mkinitcpio.conf\n</code></pre></p> <p>Add: <pre><code>FILES=(/etc/cryptsetup-keys.d/root.key)\n</code></pre></p>"},{"location":"linux/4-Arch-btw/#add-home-key-to-crypttab","title":"Add Home Key to Crypttab","text":"<pre><code>echo \"crypthome UUID=$(blkid -s UUID -o value /dev/sda3) /etc/cryptsetup-keys.d/home.key luks\" &gt;&gt; /etc/crypttab\n</code></pre>"},{"location":"linux/4-Arch-btw/#rebuild-initramfs","title":"Rebuild Initramfs","text":"<pre><code>mkinitcpio -P\n</code></pre>"},{"location":"linux/4-Arch-btw/#add-root-key-to-grub","title":"Add Root Key to GRUB","text":"<pre><code>sed -i 's|GRUB_CMDLINE_LINUX_DEFAULT=.*|GRUB_CMDLINE_LINUX_DEFAULT=\"loglevel=3 quiet rd.luks.name=07ce5469-d3fb-4ad6-9e1c-e149570664f9=cryptroot root=/dev/mapper/cryptroot rd.luks.key=07ce5469-d3fb-4ad6-9e1c-e149570664f9=/etc/cryptsetup-keys.d/root.key rw\"|' /etc/default/grub\n</code></pre> <p>Tip: Use this nvim command to insert UUID: 1. Position cursor where UUID should go 2. Type: <code>:r !blkid -s UUID -o value /dev/sda2</code> 3. UUID will be inserted at cursor position</p>"},{"location":"linux/4-Arch-btw/#final-system-configuration","title":"Final System Configuration","text":""},{"location":"linux/4-Arch-btw/#set-timezone","title":"Set Timezone","text":"<pre><code>ln -sf /usr/share/zoneinfo/Europe/Warsaw /etc/localtime\n</code></pre>"},{"location":"linux/4-Arch-btw/#configure-ntp-time-synchronization","title":"Configure NTP (Time Synchronization)","text":"<p>Edit <code>/etc/systemd/timesyncd.conf</code>: <pre><code>NTP=0.arch.pool.ntp.org 1.arch.pool.ntp.org 2.arch.pool.ntp.org 3.arch.pool.ntp.org \nFallbackNTP=0.pool.ntp.org 1.pool.ntp.org\n</code></pre></p> <p>Enable time synchronization: <pre><code>systemctl enable systemd-timesyncd\n</code></pre></p>"},{"location":"linux/4-Arch-btw/#set-locale","title":"Set Locale","text":"<p>Edit <code>/etc/locale.gen</code> and uncomment: <pre><code>en_US.UTF-8 UTF-8\n</code></pre></p> <p>Generate locale files: <pre><code>locale-gen \n</code></pre></p> <p>Set system language: <pre><code>echo \"LANG=en_US.UTF-8\" &gt; /etc/locale.conf\n</code></pre></p>"},{"location":"linux/4-Arch-btw/#set-hostname","title":"Set Hostname","text":"<pre><code>echo \"archi\" &gt; /etc/hostname\n</code></pre>"},{"location":"linux/4-Arch-btw/#create-user","title":"Create User","text":"<p>Create user with home directory and add to wheel group for sudo: <pre><code>useradd -m -G wheel kcn\n</code></pre></p> <p>Set user password: <pre><code>passwd kcn\n</code></pre></p>"},{"location":"linux/4-Arch-btw/#install-and-configure-sudo","title":"Install and Configure Sudo","text":"<pre><code>pacman -S sudo\n</code></pre> <p>Set system editor: <pre><code>export EDITOR=nvim\n</code></pre></p> <p>Edit sudoers file: <pre><code>visudo\n</code></pre></p> <p>Uncomment this line: <pre><code>%wheel ALL=(ALL:ALL) ALL\n</code></pre></p>"},{"location":"linux/4-Arch-btw/#essential-system-tools","title":"Essential System Tools","text":""},{"location":"linux/4-Arch-btw/#iwd-wifi-management","title":"iwd (WiFi Management)","text":"<pre><code>pacman -S iwd\nsystemctl enable iwd\nsystemctl enable systemd-resolved\n</code></pre> <p>Create DNS symlink: <pre><code>ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf\n</code></pre></p> <p>Configure iwd: <pre><code>sudo nvim /etc/iwd/main.conf\n</code></pre></p> <pre><code>[General]\nEnableNetworkConfiguration=true\nNameResolvingService=systemd\n</code></pre>"},{"location":"linux/4-Arch-btw/#ssh-server","title":"SSH Server","text":"<pre><code>pacman -S openssh\nsudo systemctl enable sshd\n</code></pre>"},{"location":"linux/4-Arch-btw/#zram-compressed-swap-in-ram","title":"zRAM (Compressed Swap in RAM)","text":"<pre><code>sudo pacman -S zram-generator\n</code></pre> <p>Configure zRAM: <pre><code>sudo nvim /etc/systemd/zram-generator.conf\n</code></pre></p> <pre><code>[zram0]\nzram-size = ram / 2\ncompression-algorithm = zstd\nswap-priority = 100\n</code></pre>"},{"location":"linux/4-Arch-btw/#reboot-into-new-system","title":"Reboot into New System","text":"<pre><code>exit\numount -R /mnt\nreboot now\n</code></pre>"},{"location":"linux/4-Arch-btw/#desktop-environment-setup","title":"Desktop Environment Setup","text":""},{"location":"linux/4-Arch-btw/#xorg-display-server","title":"Xorg Display Server","text":"<pre><code>sudo pacman -S xorg-server xorg-xinit xorg-xrandr\n</code></pre> <ul> <li><code>xorg-server</code> \u2013 core display server</li> <li><code>xorg-xinit</code> \u2013 manual start capability (startx)</li> <li><code>xorg-xrandr</code> \u2013 resolution and monitor management</li> </ul> <p>Note: We don't install <code>xorg-drivers</code> meta-package (too much bloat)</p>"},{"location":"linux/4-Arch-btw/#auto-start-x-on-login","title":"Auto-start X on Login","text":"<p>Edit bash profile: <pre><code>nvim ~/.bash_profile\n</code></pre></p> <pre><code>if [[ -z $DISPLAY ]] &amp;&amp; [[ $(tty) = /dev/tty1 ]]; then\n    exec startx\nfi\n</code></pre> <p>Create xinitrc: <pre><code>nvim ~/.xinitrc\n</code></pre></p> <pre><code>exec i3\n</code></pre>"},{"location":"linux/4-Arch-btw/#intel-gpu-driver","title":"Intel GPU Driver","text":"<pre><code>sudo pacman -S xf86-video-intel mesa\n</code></pre>"},{"location":"linux/4-Arch-btw/#i3-window-manager","title":"i3 (Window Manager)","text":"<pre><code>sudo pacman -S i3-wm i3status dmenu\n</code></pre>"},{"location":"linux/4-Arch-btw/#picom-compositor","title":"Picom (Compositor)","text":"<pre><code>sudo pacman -S picom\n</code></pre> <p>Create config directory: <pre><code>mkdir -p ~/.config/picom\n</code></pre></p> <p>Configure picom: <pre><code>nvim ~/.config/picom/picom.conf\n</code></pre></p> <pre><code>backend = \"glx\";\nvsync = true;\n\nshadow = true;\nshadow-radius = 8;\nshadow-offset-x = -4;\nshadow-offset-y = -4;\n\nopacity-rule = [\n  \"90:class_g = 'Alacritty'\"\n];\n</code></pre> <p>Auto-start in i3: <pre><code>nvim ~/.config/i3/config\n</code></pre></p> <pre><code>exec_always --no-startup-id picom\n</code></pre>"},{"location":"linux/4-Arch-btw/#fonts","title":"Fonts","text":""},{"location":"linux/4-Arch-btw/#install-fonts","title":"Install Fonts","text":"<pre><code>sudo pacman -S ttf-jetbrains-mono  \nsudo pacman -S ttf-jetbrains-mono-nerd  \nsudo pacman -S ttf-font-awesome\nsudo pacman -S fontconfig\n</code></pre>"},{"location":"linux/4-Arch-btw/#configure-font-rendering","title":"Configure Font Rendering","text":"<pre><code>nvim ~/.config/fontconfig/fonts.conf\n</code></pre> <pre><code>&lt;?xml version=\"1.0\"?&gt; \n&lt;!DOCTYPE fontconfig SYSTEM \"fonts.dtd\"&gt; \n&lt;fontconfig&gt; \n    &lt;match target=\"font\"&gt; \n        &lt;edit name=\"hinting\" mode=\"assign\"&gt;&lt;bool&gt;true&lt;/bool&gt;&lt;/edit&gt; \n        &lt;edit name=\"hintstyle\" mode=\"assign\"&gt;&lt;const&gt;hintslight&lt;/const&gt;&lt;/edit&gt; \n        &lt;edit name=\"antialias\" mode=\"assign\"&gt;&lt;bool&gt;true&lt;/bool&gt;&lt;/edit&gt; \n        &lt;edit name=\"rgba\" mode=\"assign\"&gt;&lt;const&gt;rgb&lt;/const&gt;&lt;/edit&gt; \n    &lt;/match&gt; \n&lt;/fontconfig&gt;\n</code></pre>"},{"location":"linux/4-Arch-btw/#refresh-font-cache","title":"Refresh Font Cache","text":"<pre><code>fc-cache -fv\n</code></pre>"},{"location":"linux/4-Arch-btw/#set-i3-font","title":"Set i3 Font","text":"<p>Edit i3 config: <pre><code>nvim ~/.config/i3/config\n</code></pre></p> <pre><code>font pango:JetBrainsMono Nerd Font 7\n</code></pre>"},{"location":"linux/4-Arch-btw/#terminal-emulator-alacritty","title":"Terminal Emulator (Alacritty)","text":""},{"location":"linux/4-Arch-btw/#install-alacritty","title":"Install Alacritty","text":"<pre><code>sudo pacman -S alacritty\n</code></pre>"},{"location":"linux/4-Arch-btw/#configure-alacritty","title":"Configure Alacritty","text":"<pre><code>nvim ~/.config/alacritty/alacritty.toml\n</code></pre> <pre><code>[font]  \nsize = 8.5  \n\n[font.normal]  \nfamily = \"JetBrainsMono Nerd Font Mono\"  \nstyle = \"Regular\"  \n\n[font.bold]  \nfamily = \"JetBrainsMono Nerd Font Mono\"  \nstyle = \"Bold\"  \n\n[font.italic]  \nfamily = \"JetBrainsMono Nerd Font Mono\"  \nstyle = \"Italic\"  \n\n[window]  \npadding = { x = 6, y = 6 }  \n\n[env]  \nTERM = \"xterm-256color\"\n</code></pre>"},{"location":"linux/4-Arch-btw/#add-terminal-keybinding-to-i3","title":"Add Terminal Keybinding to i3","text":"<pre><code>nvim ~/.config/i3/config\n</code></pre> <pre><code>bindsym $mod+Return exec alacritty\n</code></pre>"},{"location":"linux/4-Arch-btw/#audio-pipewire","title":"Audio (PipeWire)","text":""},{"location":"linux/4-Arch-btw/#install-pipewire","title":"Install PipeWire","text":"<pre><code>sudo pacman -S pipewire pipewire-pulse wireplumber pavucontrol brightnessctl\n</code></pre>"},{"location":"linux/4-Arch-btw/#enable-audio-services","title":"Enable Audio Services","text":"<p>Important: Use <code>--user</code> flag (user service, not system-wide): <pre><code>systemctl --user enable --now pipewire pipewire-pulse wireplumber\n</code></pre></p>"},{"location":"linux/4-Arch-btw/#verify-audio-works","title":"Verify Audio Works","text":"<pre><code>pactl info\n</code></pre>"},{"location":"linux/4-Arch-btw/#volume-control-keybindings","title":"Volume Control Keybindings","text":"<p>Edit i3 config: <pre><code>nvim ~/.config/i3/config\n</code></pre></p> <pre><code># Auto-start audio services\nexec --no-startup-id /usr/bin/pipewire \nexec --no-startup-id /usr/bin/wireplumber\n\n# Volume keybindings\nbindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5% \nbindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5% \nbindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle\n</code></pre>"},{"location":"linux/4-Arch-btw/#screen-brightness","title":"Screen Brightness","text":""},{"location":"linux/4-Arch-btw/#install-brightness-control","title":"Install Brightness Control","text":"<pre><code>sudo pacman -S brightnessctl\n\n# Add user to video group (allows control without sudo)\nsudo usermod -aG video $USER\n</code></pre>"},{"location":"linux/4-Arch-btw/#brightness-keybindings","title":"Brightness Keybindings","text":"<p>Edit i3 config: <pre><code>nvim ~/.config/i3/config\n</code></pre></p> <pre><code>bindsym XF86MonBrightnessUp exec --no-startup-id brightnessctl set +10%\nbindsym XF86MonBrightnessDown exec --no-startup-id brightnessctl set 10%-\n</code></pre>"},{"location":"linux/4-Arch-btw/#bluetooth","title":"Bluetooth","text":""},{"location":"linux/4-Arch-btw/#install-bluetooth-stack","title":"Install Bluetooth Stack","text":"<pre><code># Install bluetooth backend\nsudo pacman -S bluez bluez-utils\n\n# Enable bluetooth service\nsudo systemctl enable --now bluetooth\n</code></pre>"},{"location":"linux/4-Arch-btw/#manage-bluetooth-devices","title":"Manage Bluetooth Devices","text":"<p>Use <code>bluetoothctl</code> command-line tool: <pre><code>bluetoothctl\n</code></pre></p> <p>Commands inside <code>bluetoothctl</code>: <pre><code>power on\nscan on\npair XX:XX:XX:XX:XX:XX\nconnect XX:XX:XX:XX:XX:XX\ntrust XX:XX:XX:XX:XX:XX\nexit\n</code></pre></p>"},{"location":"linux/4-Arch-btw/#optional-blueman-gui","title":"Optional: Blueman GUI","text":"<pre><code>sudo pacman -S blueman\n</code></pre> <p>Auto-start in i3: <pre><code>nvim ~/.config/i3/config\n</code></pre></p> <pre><code>exec --no-startup-id blueman-applet\n</code></pre>"},{"location":"linux/4-Arch-btw/#web-browser-brave","title":"Web Browser (Brave)","text":""},{"location":"linux/4-Arch-btw/#install-aur-helper-yay","title":"Install AUR Helper (yay)","text":"<pre><code>sudo pacman -S --needed base-devel git  \ngit clone https://aur.archlinux.org/yay-bin.git  \ncd yay-bin  \nmakepkg -si\n</code></pre>"},{"location":"linux/4-Arch-btw/#install-brave-browser","title":"Install Brave Browser","text":"<pre><code>yay -S --noconfirm brave-bin\n\n# Clean up\ncd .. \nrm -rf yay-bin\n</code></pre>"},{"location":"linux/4-Arch-btw/#enable-gpu-acceleration-in-brave","title":"Enable GPU Acceleration in Brave","text":"<ol> <li>Open Brave and navigate to: <code>brave://flags</code></li> <li>Find and set to Enabled:</li> <li>Override software rendering list (forces GPU usage)</li> <li>Hardware-accelerated video decode (offloads video to GPU)</li> <li> <p>GPU Rasterization</p> </li> <li> <p>Verify GPU acceleration: <code>brave://gpu</code></p> </li> <li>Look for green \"Hardware accelerated\" entries</li> </ol>"},{"location":"linux/4-Arch-btw/#brave-keybindings","title":"Brave Keybindings","text":"<p>Edit i3 config: <pre><code>nvim ~/.config/i3/config\n</code></pre></p> <pre><code># Launch YouTube as web app\nbindsym $mod+y exec brave --app=https://youtube.com --class=YoutubeApp\n\n# Launch full Brave browser\nbindsym $mod+Shift+y exec brave\n</code></pre>"},{"location":"linux/4-Arch-btw/#additional-tools","title":"Additional Tools","text":""},{"location":"linux/4-Arch-btw/#system-utilities","title":"System Utilities","text":"<pre><code>sudo pacman -S btop screenfetch bat eza fzf fd ripgrep tmux yazi\n</code></pre> <ul> <li><code>btop</code> \u2013 system monitor</li> <li><code>screenfetch</code> \u2013 system info display</li> <li><code>bat</code> \u2013 cat replacement with syntax highlighting</li> <li><code>eza</code> \u2013 ls replacement with colors</li> <li><code>fzf</code> \u2013 fuzzy finder</li> <li><code>fd</code> \u2013 find replacement</li> <li><code>ripgrep</code> \u2013 grep replacement</li> </ul>"},{"location":"linux/4-Arch-btw/#starship-prompt","title":"Starship Prompt","text":"<pre><code>sudo pacman -S starship\n\necho 'eval \"$(starship init bash)\"' &gt;&gt; ~/.bashrc\n</code></pre>"},{"location":"linux/4-Arch-btw/#laptop-hardware-keys","title":"Laptop Hardware Keys","text":""},{"location":"linux/4-Arch-btw/#unblock-wireless-devices","title":"Unblock Wireless Devices","text":"<pre><code># Check blocked devices\nrfkill list\n\n# Unblock WiFi\nsudo rfkill unblock wifi\n\n# Unblock Bluetooth\nsudo rfkill unblock bluetooth\n\n# Or unblock everything\nsudo rfkill unblock all\n</code></pre>"},{"location":"linux/4-Arch-btw/#suspend-on-lid-close","title":"Suspend on Lid Close","text":"<p>Check if hardware detects lid state: <pre><code>cat /proc/acpi/button/lid/LID*/state\n</code></pre></p> <p>If you see <code>open</code>/<code>closed</code> \u2192 hardware works correctly.</p>"},{"location":"linux/4-Arch-btw/#configure-lid-switch-behavior","title":"Configure Lid Switch Behavior","text":"<p>Edit logind configuration: <pre><code>sudo nvim /etc/systemd/logind.conf\n</code></pre></p> <pre><code>HandleLidSwitch=suspend\nHandleLidSwitchExternalPower=suspend\nHandleLidSwitchDocked=ignore\n</code></pre> <p>Apply changes: <pre><code>sudo systemctl restart systemd-logind\n</code></pre></p>"},{"location":"linux/4-Arch-btw/#suspend-after-idle-time","title":"Suspend After Idle Time","text":"<p>Edit logind configuration: <pre><code>sudo nvim /etc/systemd/logind.conf\n</code></pre></p> <pre><code>IdleAction=suspend\nIdleActionSec=1h\n</code></pre>"},{"location":"linux/4-Arch-btw/#prevent-suspend-during-media-playback","title":"Prevent Suspend During Media Playback","text":""},{"location":"linux/4-Arch-btw/#install-playerctl","title":"Install PlayerCTL","text":"<pre><code>sudo pacman -S playerctl\n</code></pre>"},{"location":"linux/4-Arch-btw/#create-inhibitor-script","title":"Create Inhibitor Script","text":"<pre><code>nvim ~/.local/bin/media-inhibit.sh\n</code></pre> <pre><code>#!/bin/bash\n\nwhile true; do\n    if playerctl status 2&gt;/dev/null | grep -q Playing; then\n        systemd-inhibit \\\n          --what=sleep \\\n          --why=\"Media playback\" \\\n          --mode=block \\\n          sleep 30\n    else\n        sleep 30\n    fi\ndone\n</code></pre> <p>Make executable: <pre><code>chmod +x ~/.local/bin/media-inhibit.sh\n</code></pre></p>"},{"location":"linux/4-Arch-btw/#create-systemd-user-service","title":"Create systemd User Service","text":"<pre><code>nvim ~/.config/systemd/user/media-inhibit.service\n</code></pre> <pre><code>[Unit]\nDescription=Block suspend while media is playing\n\n[Service]\nExecStart=%h/.local/bin/media-inhibit.sh\nRestart=always\n\n[Install]\nWantedBy=default.target\n</code></pre>"},{"location":"linux/4-Arch-btw/#enable-service","title":"Enable Service","text":"<pre><code>systemctl --user daemon-reexec\nsystemctl --user enable --now media-inhibit.service\n</code></pre>"},{"location":"linux/4-Arch-btw/#test-inhibitor","title":"Test Inhibitor","text":"<p>Check if inhibitor is active during media playback: <pre><code>systemd-inhibit --list\n</code></pre></p>"},{"location":"pentesting/pentest_lab_notes/","title":"Penetration Testing Lab Setup","text":"<p>Lab Pentesting</p> <p>There are many websites where you can test various vulnerabilities, and entire services providing complete infrastructure like Hack The Box or HackMe. However, you can also build your own laboratory and test it in a closed environment. This gives you full control over the setup and allows for offline practice. Popular vulnerable resources include:  </p> <ul> <li>Damn Vulnerable Web Application (DVWA)</li> <li>OWASP WebGoat</li> <li>OWASP Juice Shop</li> <li>Metasploitable</li> <li>VulnHub - Collection of vulnerable VMs  </li> </ul>"},{"location":"pentesting/pentest_lab_notes/#introduction","title":"Introduction","text":"<p>Virtual penetration testing laboratory provides a controlled, isolated environment for practicing and testing various cybersecurity attack techniques, vulnerability assessments, and security tool usage. It includes a diverse range of systems spanning different operating systems, vulnerable applications, and network infrastructure components. This setup allows for hands-on experience with common attack vectors including Active Directory exploitation, web application vulnerabilities, and exploitation of legacy systems. The lab is designed to be entirely self-contained, making it safe for testing without risk to production systems or external networks.</p>"},{"location":"pentesting/pentest_lab_notes/#environment","title":"Environment","text":""},{"location":"pentesting/pentest_lab_notes/#prerequisites","title":"\ud83d\udc49 Prerequisites","text":"<ul> <li>VMware Workstation Pro</li> <li>Sufficient host resources (recommended: 32GB+ RAM, 6+ CPU Cores, 200GB+ free disk space)</li> <li>Downloaded ISO images and virtual appliances for all systems</li> </ul>"},{"location":"pentesting/pentest_lab_notes/#lab-components","title":"\ud83d\udcbb\u2699\ufe0f Lab Components","text":"Role / System Capabilities Resources IP Address Firewall, DNS, vLAN pfSense Filters traffic, isolates network segments, and manages internet access. Provides routing between VLANs and DNS services. 1 CPU / 1GB RAM / 8GB Disk <code>192.168.10.1</code> (WAN)<code>10.0.0.1</code> (LAN) Active Directory, DNS Windows Server 2003/2008 Enables testing of attacks on Active Directory, outdated Windows services, and legacy authentication mechanisms. 1-2 CPU / 4GB RAM / 40GB Disk <code>10.0.0.10</code> Workstation Windows 7 (or XP) Older systems with vulnerabilities like SMBv1 (e.g., EternalBlue exploit). Useful for testing privilege escalation and lateral movement. 1 CPU / 1-2GB RAM / 30GB Disk <code>10.0.0.20</code> Attacker Tool Kali Linux Standard distribution for penetration testing with pre-installed security tools (Metasploit, Nmap, Burp Suite, etc.). 2 CPU / 2-4GB RAM / 40GB Disk <code>10.0.0.100</code> SSH, FTP, MySQL Ubuntu Linux Used for testing password attacks, brute force, service exploitation, and privilege escalation on Linux systems. 1 CPU / 1-2GB RAM / 20GB Disk <code>10.0.0.30</code> Test Target Metasploitable 2, 3 Pre-configured with numerous vulnerable services ready for exploitation (FTP, SSH, Samba, web services, databases). 1 CPU / 512MB RAM / 8GB Disk <code>10.0.0.40</code> Vulnerable Web Applications OWASP Dojo (Juice Shop, WebGoat, bWAPP, Mutillidae, DVWA) Collection of intentionally vulnerable web applications for testing XSS, SQLi, RCE, SSRF, authentication bypass, and other OWASP Top 10 vulnerabilities. 1-2 CPU / 2GB RAM / 20GB Disk <code>10.0.0.50</code>"},{"location":"pentesting/pentest_lab_notes/#network-configuration","title":"\ud83d\udce1\ud83d\udd27 Network Configuration","text":"<ul> <li>WAN Network: <code>192.168.10.0/24</code> (simulated external network/internet access)</li> <li>pfSense: <ul> <li>Network Adapter 1: <code>192.168.10.1</code> (bridged) WAN</li> <li>Network Adapter 2: <code>10.0.0.1</code> (LAN Segment) LAN </li> </ul> </li> <li>LAN Network: <code>10.0.0.0/24</code> (internal lab network)</li> <li>Gateway: pfSense <code>10.0.0.1</code></li> <li>DNS Server: pfSense / Windows Server</li> </ul>"},{"location":"pentesting/pentest_lab_notes/#key-features","title":"\ud83d\udd11 Key Features","text":"<ul> <li>Isolated Environment: Complete network segmentation from production systems</li> <li>Realistic Attack Scenarios: Multiple vulnerable targets representing real-world systems</li> <li>Active Directory Testing: Full AD environment for testing domain attacks</li> <li>Web Application Security: Comprehensive OWASP vulnerability testing platform</li> <li>Network Services: Various services (SSH, FTP, SMB, HTTP, MySQL) for exploitation practice</li> <li>Scalable Design: Easy to add additional systems or modify network topology</li> </ul> <p>Important Lab Configuration Notes</p> <ul> <li>Network Adapter Configuration: Remember to set the Network Adapter for each VM to the LAN Segment that is assigned to the LAN port on pfSense to ensure proper network connectivity</li> <li>Startup Sequence: Always start pfSense before launching other VMs to avoid network connectivity issues and ensure proper DHCP/DNS services are available</li> <li>Firewall Rules: Configure proper firewall rules to prevent access to your physical network. Consciously control traffic within the virtual network to maintain isolation and security</li> <li>Windows Firewall: Remember to configure Windows Firewall settings appropriately on the host machine, as overly restrictive rules may block virtual machines from accessing the internet through the hypervisor</li> <li>Network Isolation: Ensure all systems are set to use pfSense as their gateway to prevent unauthorized external access</li> <li>VLANs: Use separate VLANs for additional segmentation if needed</li> </ul> <p></p>"},{"location":"pentesting/pfsense-config-notes/","title":"pfSense Configuration","text":"<p>Overview</p> <p>pfSense is an open-source firewall and router platform based on FreeBSD. It provides enterprise-grade features including stateful packet filtering, NAT, VPN, traffic shaping, and comprehensive network management capabilities. This makes it ideal for creating isolated, secure lab environments for penetration testing.</p> <p>Official website: https://www.pfsense.org/</p> <p>Virtual Environment Only - Not for Production Use</p> <p>This configuration guide is specifically for virtual lab environments only. Running pfSense virtualized for production or normal daily use is strongly discouraged due to:</p> <ul> <li>Instability: Virtual routing can be unstable and may cause network interruptions</li> <li>Boot Order Dependency: pfSense VM must be started before all client VMs, or they will lose network connectivity</li> <li>Performance Issues: Virtual networking adds latency and overhead</li> <li>Limited Hardware Access: Cannot utilize dedicated network hardware or NICs efficiently</li> </ul> <p>For production environments, always install pfSense on bare metal (dedicated physical hardware). </p>"},{"location":"pentesting/pfsense-config-notes/#initial-setup-port-assignment-and-ip-configuration","title":"\ud83d\udd0c\ud83d\udee0\ufe0f Initial Setup - Port Assignment and IP Configuration","text":""},{"location":"pentesting/pfsense-config-notes/#console-configuration","title":"Console Configuration","text":"<p>After the initial boot, pfSense will present a console menu.</p> <ol> <li> <p>Assign Interfaces (Option 1)</p> </li> <li> <p>Assign <code>WAN</code> interface to your external/host network adapter (bridge or NAT)   </p> </li> <li> <p>Assign <code>LAN</code> interface to your internal lab network adapter (LAN Segment)   </p> </li> <li> <p>Set Interface IP Addresses (Option 2)</p> </li> </ol> <p>WAN Interface: </p> <ul> <li>Configure via DHCP or set static IP in your host network range (e.g., <code>192.168.10.10/24</code>)  </li> <li>Gateway: Your host network gateway  </li> </ul> <p>LAN Interface:</p> <ul> <li>Static IP: <code>10.0.0.1</code> </li> <li>Subnet mask: <code>24</code> (255.255.255.0)  </li> <li>Enable DHCP server for LAN: <code>Yes</code> </li> <li> <p>DHCP range: <code>10.0.0.150</code> to <code>10.0.0.200</code> </p> </li> <li> <p>Access the web interface at <code>http://10.0.0.1</code> from any VM on the LAN network</p> </li> </ul>"},{"location":"pentesting/pfsense-config-notes/#web-interface-configuration","title":"\u2699\ufe0f\ud83d\udd27 Web Interface Configuration","text":""},{"location":"pentesting/pfsense-config-notes/#basic-settings","title":"Basic Settings","text":"<ol> <li>System &gt; General Setup<ul> <li>Hostname: <code>pfsense</code> </li> <li>Domain: <code>lab.local</code> </li> <li>DNS Servers: Add your preferred DNS (e.g., <code>8.8.8.8</code>, <code>1.1.1.1</code>)  </li> </ul> </li> </ol>"},{"location":"pentesting/pfsense-config-notes/#dns-configuration","title":"DNS Configuration","text":"<p>Navigate to Services &gt; DNS Resolver</p> <ol> <li>Enable DNS Resolver</li> <li> <p>Configure the following settings:</p> <ul> <li>Network Interfaces: <code>LAN</code> </li> <li>DHCP Registration: Enable (allows DHCP clients to register in DNS)  </li> <li>Static DHCP: Enable (registers static DHCP mappings)  </li> </ul> </li> </ol>"},{"location":"pentesting/pfsense-config-notes/#firewall-rules","title":"\ud83e\uddf1 Firewall Rules","text":"<p>Navigate to Firewall &gt; Rules &gt; LAN</p> <p>Create rules to control lab traffic. Rule order matters - rules are processed from top to bottom.</p> <p>Critical Security Rules</p> <p>Never allow vulnerable systems (Metasploitable, OWASP applications, Windows XP/7) to access the internet! These systems are intentionally vulnerable and should remain completely isolated from external networks.</p> <p>\u26a0\ufe0f Recommended Rule Configuration:</p> Rule Action Protocol Source Destination Description Allow Kali to Internet Pass Any Single host: <code>10.0.0.100</code> Any Allow Kali Linux for tool updates Block LAN to WAN Block Any LAN net WAN net Block vulnerable systems from Internet Allow LAN to LAN Pass Any LAN net LAN net Allow internal lab communication <p>Rule Order is Critical</p> <p>Place the Kali Linux allow rule FIRST, then the block rule, then the LAN-to-LAN rule. The first matching rule wins, so specific exceptions must come before general blocks.</p>"},{"location":"pentesting/pfsense-config-notes/#rfc1918-networks-configuration","title":"RFC1918 Networks Configuration","text":"<p>Navigate to Interfaces &gt; WAN</p> <p>If you need connectivity between the host machine and lab VMs:</p> <ul> <li>Uncheck \"Block private networks and loopback addresses\" </li> <li>Uncheck \"Block bogon networks\"</li> </ul> <p>This allows RFC1918 private addresses (10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16) to traverse the WAN interface, enabling communication between your host and the lab environment.</p> <p>Security Warning</p> <p>Only disable RFC1918 blocking if your WAN interface is connected to a trusted network (like your host-only adapter). Never disable this on internet-facing interfaces.</p>"},{"location":"pentesting/pfsense-config-notes/#local-dns-configuration-for-web-applications","title":"\ud83e\udd1d Local DNS Configuration for Web Applications","text":"<p>For hosting multiple web applications on a single IP using domain names, configure DNS Host Overrides and set up a reverse proxy.</p>"},{"location":"pentesting/pfsense-config-notes/#step-1-dns-host-overrides-in-pfsense","title":"Step 1: DNS Host Overrides in pfSense","text":"<p>Navigate to Services &gt; DNS Resolver &gt; Host Overrides</p> <p>Add the following entries for your vulnerable web applications:</p> Host Domain IP Address Description webgoat dojo.lan 10.0.0.50 WebGoat Application django dojo.lan 10.0.0.50 Django Application casino dojo.lan 10.0.0.50 Casino Application shop dojo.lan 10.0.0.50 Juice Shop cheese dojo.lan 10.0.0.50 Cheese Shop <p>Save and Apply Changes after adding all entries.</p>"},{"location":"pentesting/pfsense-config-notes/#step-2-reverse-proxy-configuration-on-web-server","title":"Step 2: Reverse Proxy Configuration on Web Server","text":"<p>On the server hosting your applications (<code>10.0.0.50</code>), configure Apache as a reverse proxy to route requests based on the domain name.</p>"},{"location":"pentesting/pfsense-config-notes/#enable-required-apache-modules","title":"Enable Required Apache Modules","text":"<pre><code>sudo a2enmod proxy\nsudo a2enmod proxy_http\nsudo systemctl restart apache2\n</code></pre>"},{"location":"pentesting/pfsense-config-notes/#create-virtual-host-configurations","title":"Create Virtual Host Configurations","text":"<p>For each application, create a virtual host configuration file in <code>/etc/apache2/sites-available/</code>.</p> <p>Example: <code>casino.dojo.lan.conf</code></p> <pre><code>&lt;VirtualHost *:80&gt;\n    ServerName casino.dojo.lan\n\n    ProxyPreserveHost On\n    ProxyPass / http://127.0.0.1:3000/\n    ProxyPassReverse / http://127.0.0.1:3000/\n\n    ErrorLog ${APACHE_LOG_DIR}/casino_error.log\n    CustomLog ${APACHE_LOG_DIR}/casino_access.log combined\n&lt;/VirtualHost&gt;\n</code></pre> <p>Configuration for Other Applications:</p> Domain Port Config File webgoat.dojo.lan 8081 webgoat.dojo.lan.conf django.dojo.lan 8091 django.dojo.lan.conf shop.dojo.lan 3008 shop.dojo.lan.conf cheese.dojo.lan 8008 cheese.dojo.lan.conf"},{"location":"pentesting/pfsense-config-notes/#enable-virtual-hosts","title":"Enable Virtual Hosts","text":"<pre><code>sudo a2ensite casino.dojo.lan.conf\nsudo a2ensite webgoat.dojo.lan.conf\nsudo a2ensite django.dojo.lan.conf\nsudo a2ensite shop.dojo.lan.conf\nsudo a2ensite cheese.dojo.lan.conf\n\nsudo systemctl reload apache2\n</code></pre>"},{"location":"pentesting/pfsense-config-notes/#step-3-testing-configuration","title":"Step 3: Testing Configuration","text":"<p>Test DNS Resolution: <pre><code>nslookup casino.dojo.lan\n# Should return: 10.0.0.50\n</code></pre></p> <p>Test Web Access:</p> <p>Open a browser and navigate to <code>http://casino.dojo.lan/</code>. You should see the application running on port 3000, not the default Apache page.</p> <p>If issues occur, examine the logs: <pre><code>tail -f /var/log/apache2/casino_error.log\ntail -f /var/log/apache2/casino_access.log\n</code></pre></p>"},{"location":"pentesting/pfsense-config-notes/#common-issues","title":"\ud83d\udc1b Common Issues","text":"<ul> <li>Seeing default Apache page: Ensure the virtual host is enabled and <code>ServerName</code> matches exactly  </li> <li>DNS not resolving: Verify Host Overrides are saved and DNS Resolver is running  </li> <li>Connection refused: Check that the backend application is running on the specified port  </li> </ul>"},{"location":"pentesting/pfsense-config-notes/#configuration-summary","title":"Configuration Summary","text":"<p>Your pfSense lab setup should now include:</p> <ul> <li>\u2705 WAN and LAN interfaces properly assigned</li> <li>\u2705 Static IP addressing for LAN network</li> <li>\u2705 DHCP server for automatic client configuration</li> <li>\u2705 DNS Resolver for internal name resolution</li> <li>\u2705 Firewall rules controlling lab traffic</li> <li>\u2705 Local DNS entries for web applications</li> <li>\u2705 RFC1918 settings configured for host connectivity</li> </ul> <p>This configuration provides a secure, isolated environment for penetration testing while maintaining necessary connectivity and services.</p> <p></p>"},{"location":"provisioning/0-pxe-tftp/","title":"PXE TFTP","text":"<p>Legacy PXE/TFTP</p> <p>When the network environment or hardware supports only legacy PXE (Preboot Execution Environment), the Trivial File Transfer Protocol (TFTP) is required to deliver the initial boot files (kernel and initramfs) to the machine, as it is a minimal, connectionless protocol ideal for this early stage.</p> <p> TFTP Wikipedia page </p>"},{"location":"provisioning/0-pxe-tftp/#overview","title":"\ud83d\udccb Overview","text":"<p>This guide covers setting up a TFTP server for PXE network booting on Debian.</p> <p>Use Case:</p> <p>Useful when PXE boot only works in Legacy BIOS mode and you need a dedicated TFTP server isolated from your main network.</p> <p>Environment:</p> <ul> <li>Server: Debian-based system</li> <li>TFTP Service: <code>tftpd-hpa</code> (most stable and widely used for PXE)</li> <li>Network: VLAN 5 (<code>192.168.55.0/24</code>)</li> <li>TFTP Server IP: <code>192.168.55.254</code></li> </ul>"},{"location":"provisioning/0-pxe-tftp/#1-install-tftp-server","title":"1. Install TFTP Server","text":"<p>Install <code>tftpd-hpa</code>, the most stable and commonly used TFTP daemon for PXE:</p> <pre><code>sudo apt update\nsudo apt install tftpd-hpa\n</code></pre>"},{"location":"provisioning/0-pxe-tftp/#2-configure-tftp-server","title":"2. Configure TFTP Server","text":"<p>Edit the TFTP configuration file:</p> <pre><code>sudo nano /etc/default/tftpd-hpa\n</code></pre> <p>Set the following configuration:</p> <pre><code>TFTP_USERNAME=\"tftp\"\nTFTP_DIRECTORY=\"/srv/tftp\"\nTFTP_ADDRESS=\"192.168.55.254:69\"\nTFTP_OPTIONS=\"--secure --create\"\n</code></pre> <p>Configuration explanation:</p> Parameter Value Description <code>TFTP_USERNAME</code> <code>tftp</code> User account running the TFTP service <code>TFTP_DIRECTORY</code> <code>/srv/tftp</code> Root directory for PXE boot files <code>TFTP_ADDRESS</code> <code>192.168.55.254:69</code> IP and port to bind (VLAN 5 only) <code>TFTP_OPTIONS</code> <code>--secure --create</code> Security flags and file creation permission <p>Important:</p> <p><code>TFTP_ADDRESS</code> must be set to <code>192.168.55.254</code> (not <code>0.0.0.0</code>) to ensure the service only listens on VLAN 5, preventing any interference with your main LAN (<code>192.168.0.0/24</code>).</p>"},{"location":"provisioning/0-pxe-tftp/#3-create-tftp-directory","title":"3. Create TFTP Directory","text":"<p>Create the TFTP root directory and set proper ownership:</p> <pre><code>sudo mkdir -p /srv/tftp\nsudo chown -R tftp:tftp /srv/tftp\n</code></pre>"},{"location":"provisioning/0-pxe-tftp/#4-restart-and-verify-service","title":"4. Restart and Verify Service","text":"<p>Restart the TFTP service and check its status:</p> <pre><code>sudo systemctl restart tftpd-hpa\nsudo systemctl enable tftpd-hpa\nsudo systemctl status tftpd-hpa\n</code></pre> <p>Expected output:</p> <pre><code>\u25cf tftpd-hpa.service - LSB: HPA's tftp server\n   Loaded: loaded (/etc/init.d/tftpd-hpa; generated)\n   Active: active (running)\n</code></pre>"},{"location":"provisioning/0-pxe-tftp/#5-verify-tftp-server","title":"5. Verify TFTP Server","text":"<p>Test if the TFTP server is listening on the correct interface:</p> <pre><code>sudo ss -ulnp | grep :69\n</code></pre> <p>Expected output:</p> <pre><code>UNCONN 0  0  192.168.55.254:69  0.0.0.0:*  users:((\"in.tftpd\",pid=1234,fd=3))\n</code></pre> <p>This confirms TFTP is only listening on VLAN 5 (<code>192.168.55.254</code>).</p>"},{"location":"provisioning/0-pxe-tftp/#6-test-tftp-connection","title":"6. Test TFTP Connection","text":"<p>From a client machine on the same VLAN, test the TFTP connection:</p> <pre><code># Install tftp client (if not already installed)\nsudo apt install tftp-hpa\n\n# Test connection\ntftp 192.168.55.254\ntftp&gt; status\ntftp&gt; quit\n</code></pre>"},{"location":"provisioning/0-pxe-tftp/#7-populate-pxe-boot-files","title":"7. Populate PXE Boot Files","text":""},{"location":"provisioning/0-pxe-tftp/#71-download-pxelinux-files","title":"7.1. Download PXELinux Files","text":"<p>Download the Syslinux bootloader files needed for PXE:</p> <pre><code>cd /srv/tftp\nsudo wget https://mirrors.edge.kernel.org/pub/linux/utils/boot/syslinux/syslinux-6.03.tar.gz\nsudo tar -xzf syslinux-6.03.tar.gz\nsudo cp syslinux-6.03/bios/core/pxelinux.0 .\nsudo cp syslinux-6.03/bios/com32/elflink/ldlinux/ldlinux.c32 .\nsudo cp syslinux-6.03/bios/com32/lib/libcom32.c32 .\nsudo cp syslinux-6.03/bios/com32/libutil/libutil.c32 .\nsudo cp syslinux-6.03/bios/com32/menu/vesamenu.c32 .\n</code></pre>"},{"location":"provisioning/0-pxe-tftp/#72-create-pxelinux-configuration","title":"7.2. Create PXELinux Configuration","text":"<p>Create the PXE boot menu configuration:</p> <pre><code>sudo mkdir -p /srv/tftp/pxelinux.cfg\nsudo nano /srv/tftp/pxelinux.cfg/default\n</code></pre> <p>Example configuration:</p> <pre><code>DEFAULT menu.c32\nPROMPT 0\nTIMEOUT 300\nMENU TITLE PXE Boot Menu\n\nLABEL local\n    MENU LABEL Boot from local disk\n    LOCALBOOT 0\n\nLABEL ubuntu\n    MENU LABEL Install Ubuntu Server\n    KERNEL ubuntu/vmlinuz\n    APPEND initrd=ubuntu/initrd.img\n</code></pre>"},{"location":"provisioning/0-pxe-tftp/#73-add-os-images-example-ubuntu","title":"7.3. Add OS Images (Example: Ubuntu)","text":"<p>Download and place Ubuntu netboot files:</p> <pre><code>sudo mkdir -p /srv/tftp/ubuntu\ncd /srv/tftp/ubuntu\nsudo wget http://archive.ubuntu.com/ubuntu/dists/jammy/main/installer-amd64/current/legacy-images/netboot/ubuntu-installer/amd64/linux\nsudo wget http://archive.ubuntu.com/ubuntu/dists/jammy/main/installer-amd64/current/legacy-images/netboot/ubuntu-installer/amd64/initrd.gz\nsudo mv linux vmlinuz\nsudo mv initrd.gz initrd.img\n</code></pre>"},{"location":"provisioning/0-pxe-tftp/#8-dhcp-configuration-tftp-boot-options","title":"8. DHCP Configuration (TFTP Boot Options)","text":"<p>Configure your DHCP server to point clients to the TFTP server.</p> <p>Example DHCP options (for dnsmasq):</p> <pre><code># /etc/dnsmasq.conf\ndhcp-boot=pxelinux.0,192.168.55.254\n</code></pre> <p>Example DHCP options (for ISC DHCP Server):</p> <pre><code># /etc/dhcp/dhcpd.conf\nnext-server 192.168.55.254;\nfilename \"pxelinux.0\";\n</code></pre> <p>Restart your DHCP service after configuration.</p>"},{"location":"provisioning/0-pxe-tftp/#9-firewall-configuration-optional","title":"9. Firewall Configuration (Optional)","text":"<p>If you have a firewall enabled, allow TFTP traffic:</p> <pre><code># UFW\nsudo ufw allow 69/udp\n\n# iptables\nsudo iptables -A INPUT -p udp --dport 69 -j ACCEPT\n</code></pre>"},{"location":"provisioning/0-pxe-tftp/#verification-checklist","title":"\u2705 Verification Checklist","text":"<ul> <li> TFTP service is running: <code>systemctl status tftpd-hpa</code></li> <li> TFTP listens on VLAN 5 only: <code>ss -ulnp | grep :69</code></li> <li> TFTP directory has correct permissions: <code>ls -ld /srv/tftp</code></li> <li> PXE boot files are in place: <code>ls /srv/tftp/pxelinux.0</code></li> <li> DHCP is configured with TFTP server options</li> <li> Test PXE boot from a client machine</li> </ul>"},{"location":"provisioning/0-pxe-tftp/#troubleshooting","title":"\ud83d\udc1b Troubleshooting","text":""},{"location":"provisioning/0-pxe-tftp/#tftp-service-wont-start","title":"TFTP Service Won't Start","text":"<p>Check logs:</p> <pre><code>sudo journalctl -u tftpd-hpa -n 50\n</code></pre> <p>Common issue: Permission denied on <code>/srv/tftp</code></p> <p>Solution:</p> <pre><code>sudo chown -R tftp:tftp /srv/tftp\nsudo chmod 755 /srv/tftp\n</code></pre>"},{"location":"provisioning/0-pxe-tftp/#pxe-client-cant-connect","title":"PXE Client Can't Connect","text":"<p>Symptom: Client shows \"PXE-E32: TFTP open timeout\"</p> <p>Verify:</p> <ol> <li>TFTP service is running on correct IP</li> <li>Firewall allows UDP port 69</li> <li>DHCP is providing correct <code>next-server</code> option</li> </ol> <p>Test from client network:</p> <pre><code>tftp 192.168.55.254\ntftp&gt; get pxelinux.0\n</code></pre>"},{"location":"provisioning/0-pxe-tftp/#files-not-found-tftp-error","title":"Files Not Found (TFTP Error)","text":"<p>Symptom: \"File not found\" errors during PXE boot</p> <p>Solution:</p> <p>Verify file paths and permissions:</p> <pre><code>ls -la /srv/tftp/\nls -la /srv/tftp/pxelinux.cfg/\n</code></pre> <p>All files must be readable by <code>tftp</code> user:</p> <pre><code>sudo chmod -R 644 /srv/tftp/*\nsudo chmod 755 /srv/tftp\nsudo chmod 755 /srv/tftp/pxelinux.cfg\n</code></pre>"},{"location":"provisioning/0-pxe-tftp/#additional-resources","title":"\ud83d\udcda Additional Resources","text":"<ul> <li>TFTP-HPA Documentation</li> <li>Syslinux PXELinux Guide</li> <li>Ubuntu PXE Installation Guide</li> </ul>"},{"location":"provisioning/1-custom-image/","title":"Image with Packer","text":"<p>MAAS Custom Images</p> <p>By default, MAAS only includes an image for Ubuntu. If you want to add an image for another operating system, you need to build it in the appropriate format using the Packer application.</p> <p> Packer Docs</p>"},{"location":"provisioning/1-custom-image/#goal","title":"\ud83c\udfaf Goal","text":"<p>To build a clean <code>debian-custom-cloudimg.tar.gz</code> image for MAAS deployment.</p>"},{"location":"provisioning/1-custom-image/#environment-tools","title":"\ud83d\udee0\ufe0f Environment &amp; Tools","text":"<p>Host Environment:</p> <ul> <li>Windows 11 / WSL2 (Ubuntu)</li> <li>Builder: Packer with QEMU builder</li> </ul> <p>Repository:</p> <p>Clone Canonical's MAAS Image Builder (based on HCL format):</p> <pre><code>git clone https://github.com/canonical/packer-maas.git\ncd packer-maas\n</code></pre>"},{"location":"provisioning/1-custom-image/#1-packer-configuration-wsl2qemu","title":"1. Packer Configuration (WSL2/QEMU)","text":"<p>The default configuration required modifications primarily due to the Nested Virtualization environment (QEMU running inside WSL2/Hyper-V).</p>"},{"location":"provisioning/1-custom-image/#11-kvm-acceleration-fix-crucial-for-wsl2","title":"1.1. KVM Acceleration Fix (Crucial for WSL2)","text":"<p>The main build may fail because QEMU attempts to use KVM acceleration (<code>accel=kvm</code>), which is inaccessible from within WSL2, resulting in a \"Permission denied\" error.</p> <p>File Modified: <code>debian-cloudimg.pkr.hcl</code></p> <p>Original configuration:</p> <pre><code># Original (doesn't work in WSL2)\nqemu_machine = { \"amd64\" = \"accel=kvm\" }\nqemu_cpu = { \"amd64\" = \"host\" }\n</code></pre> <p>Fixed configuration for WSL2 emulation:</p> <pre><code>locals {\n    qemu_machine = { \"amd64\" = \"q35\" }   # Use standard machine without KVM flag\n    qemu_cpu = { \"amd64\" = \"max\" }       # Use safe CPU setting\n}\n</code></pre> <p>Explanation:</p> <ul> <li>Removed hardcoded KVM flags in the <code>locals</code> block</li> <li>Forces pure software emulation (slower but works in WSL2)</li> <li>Uses <code>q35</code> machine type (standard x86_64 chipset)</li> <li>Uses <code>max</code> CPU model (safe fallback without host-passthrough)</li> </ul>"},{"location":"provisioning/1-custom-image/#12-boot-mode-configuration","title":"1.2. Boot Mode Configuration","text":"<p>Switched the boot mode to BIOS (<code>BOOT=bios</code>) to avoid potential conflicts with UEFI/OVMF firmware copying and usage within the QEMU environment.</p>"},{"location":"provisioning/1-custom-image/#13-build-the-image","title":"1.3. Build the Image","text":"<p>Run the build command:</p> <pre><code>make debian SERIES=trixie BOOT=bios\n</code></pre> <p>Build process:</p> <ol> <li>Packer downloads the Debian Trixie ISO</li> <li>QEMU starts the VM in software emulation mode</li> <li>Automated installation proceeds via preseed</li> <li>Image is packaged as <code>debian-custom-cloudimg.tar.gz</code></li> </ol> <p>Expected output:</p> <pre><code>==&gt; Builds finished. The artifacts of successful builds are:\n--&gt; qemu.debian: debian-custom-cloudimg.tar.gz\n</code></pre>"},{"location":"provisioning/1-custom-image/#2-maas-deployment-steps","title":"2. MAAS Deployment Steps","text":"<p>After a successful build, the image is ready for deployment.</p>"},{"location":"provisioning/1-custom-image/#21-file-transfer","title":"2.1. File Transfer","text":"<p>Copy the image to the MAAS server:</p> <pre><code>scp debian-custom-cloudimg.tar.gz user@maas_server_ip:/home/user/\n</code></pre>"},{"location":"provisioning/1-custom-image/#22-upload-image-to-maas","title":"2.2. Upload Image to MAAS","text":"<p>SSH to the MAAS server and upload the custom image:</p> <pre><code>ssh user@maas_server_ip\n\n# Upload the custom image\nmaas admin boot-resources create \\\n    name='custom/debian-trixie' \\\n    title='Debian 13 Trixie Custom' \\\n    architecture='amd64/generic' \\\n    filetype='tgz' \\\n    content@=debian-custom-cloudimg.tar.gz\n</code></pre>"},{"location":"provisioning/1-custom-image/#23-verify-image-upload","title":"2.3. Verify Image Upload","text":"<p>Check if the image was uploaded successfully:</p> <pre><code>maas admin boot-resources read\n</code></pre> <p>Look for your custom image in the list:</p> <pre><code>custom/debian-trixie (amd64/generic)\n</code></pre>"},{"location":"provisioning/1-custom-image/#24-deploy-to-nodes","title":"2.4. Deploy to Nodes","text":"<p>Via MAAS UI:</p> <ol> <li>Navigate to Machines</li> <li>Select a node in Ready state</li> <li>Click Deploy</li> <li>Choose custom/debian-trixie from the OS dropdown</li> <li>Confirm deployment</li> </ol> <p>Via CLI:</p> <pre><code>maas admin machine deploy &lt;system_id&gt; \\\n    distro_series='custom/debian-trixie'\n</code></pre>"},{"location":"provisioning/1-custom-image/#troubleshooting","title":"\ud83d\udc1b Troubleshooting","text":""},{"location":"provisioning/1-custom-image/#build-fails-with-permission-denied-kvm","title":"Build Fails with \"Permission denied\" (KVM)","text":"<p>Symptom:</p> <pre><code>qemu-system-x86_64: failed to initialize kvm: Permission denied\n</code></pre> <p>Solution:</p> <p>Apply the KVM fix in section 1.1 - force software emulation by removing <code>accel=kvm</code>.</p>"},{"location":"provisioning/1-custom-image/#build-is-very-slow","title":"Build is Very Slow","text":"<p>Cause:</p> <p>Software emulation (no KVM) is significantly slower than hardware acceleration.</p> <p>Expected time:</p> <ul> <li>With KVM: 5-10 minutes</li> <li>Without KVM (WSL2): 30-60 minutes</li> </ul> <p>Solution:</p> <p>Be patient. Consider building on native Linux with KVM support for faster builds.</p>"},{"location":"provisioning/1-custom-image/#ovmfuefi-boot-issues","title":"OVMF/UEFI Boot Issues","text":"<p>Symptom:</p> <pre><code>Could not find firmware for UEFI boot\n</code></pre> <p>Solution:</p> <p>Use <code>BOOT=bios</code> flag as shown in section 1.2.</p>"},{"location":"provisioning/1-custom-image/#additional-resources","title":"\ud83d\udcda Additional Resources","text":"<ul> <li>Packer QEMU Builder Docs</li> <li>MAAS Image Builder Repository</li> <li>MAAS Custom Images Documentation</li> </ul>"},{"location":"provisioning/2-cluster-deployment-maas/","title":"MAAS Deployment","text":"<p>MAAS (Metal as a Service)</p> <p>MAAS is a powerful tool designed to automate the installation and deployment of operating systems across multiple physical (bare-metal) or virtual machines. It transforms your raw hardware into an elastic cloud resource, managing provisioning from start to finish via PXE booting.</p> <p> Official MAAS documentation </p> <p>Used Prerequisites:</p> <ul> <li>Ubuntu Server: for MAAS Installation</li> <li>Nodes: Three machines (Master, Worker 1, Worker 2) configured for PXE boot</li> </ul>"},{"location":"provisioning/2-cluster-deployment-maas/#maas-deployment-initial-configuration","title":"MAAS Deployment &amp; Initial Configuration","text":""},{"location":"provisioning/2-cluster-deployment-maas/#1-maas-core-installation","title":"1. \ud83d\udcbe MAAS Core Installation","text":"<p>Install the MAAS packages and the required database components.</p> <pre><code># Add repository for latest MaaS version\nsudo apt install software-properties-common\nsudo add-apt-repository ppa:maas/3.7\n\n# Update and install the MaaS package\nsudo apt update\nsudo apt install maas\n</code></pre>"},{"location":"provisioning/2-cluster-deployment-maas/#2-initial-configuration","title":"2. \u2699\ufe0f Initial Configuration","text":"<p>Initialize the MAAS region controller. You will be prompted to choose a user (create a new one).</p> <pre><code>sudo maas init\n</code></pre>"},{"location":"provisioning/2-cluster-deployment-maas/#3-access-ui","title":"3. \ud83c\udf10 Access UI","text":"<p>Open a web browser and navigate to:</p> <p><code>http://&lt;MAAS_SERVER_IP&gt;:5240/MAAS</code></p> <p>Login: Use the administrator account credentials set during <code>maas init</code></p>"},{"location":"provisioning/2-cluster-deployment-maas/#maas-networking-domain-configuration","title":"MAAS Networking &amp; Domain Configuration","text":""},{"location":"provisioning/2-cluster-deployment-maas/#1-disable-dhcp-on-the-vlan","title":"1. \ud83d\uded1 Disable DHCP on the VLAN","text":"<p>By default, MAAS provides DHCP. To avoid conflicts with your router, you must disable the dynamic range and only use MAAS for IP reservations.</p> <p>Steps:</p> <ol> <li>Navigate to Subnets in the MAAS UI</li> <li>Select your primary subnet (e.g., <code>192.168.55.0/24</code>)</li> <li>In the DHCP section, delete the dynamic IP range</li> <li>Ensure the DHCP mode for the VLAN is set to \"Unmanaged\" or that the DHCP range is empty</li> </ol>"},{"location":"provisioning/2-cluster-deployment-maas/#2-configure-domain-and-hostnames","title":"2. \ud83d\udcdd Configure Domain and Hostnames","text":"<p>Set a cleaner domain name and ensure MAAS uses consistent naming conventions.</p> <p>Steps:</p> <ol> <li>Navigate to Settings \u2192 General \u2192 Default DNS suffix</li> <li>Change the default (e.g., <code>maas</code>) to something cleaner (e.g., <code>homelab</code>)</li> <li>In the DNS tab, verify that MAAS is configured to manage DNS records for your domain</li> </ol>"},{"location":"provisioning/2-cluster-deployment-maas/#3-ssh-key-registration","title":"3. \ud83d\udd11 SSH Key Registration","text":"<p>You can securely import your keys directly from GitHub, which is faster than pasting them manually.</p> <p>Steps:</p> <ol> <li>Go to User Account \u2192 My Account</li> <li>In the SSH keys section, choose \"Import from GitHub\"</li> <li>Enter your GitHub username - MAAS will automatically fetch and register all your public keys</li> </ol>"},{"location":"provisioning/2-cluster-deployment-maas/#4-commissioning-and-ip-assignment","title":"4. \u2699\ufe0f Commissioning and IP Assignment","text":"<p>Steps:</p> <ol> <li>Start Nodes: Power on your bare-metal nodes configured for PXE boot</li> <li>Commissioning: MAAS will discover them and perform hardware testing. Once complete, they will transition to the Ready state</li> <li>Static IP Reservation: For each Node, go to its configuration page and set a Static IP Reservation corresponding to its MAC address</li> </ol> <p>My configuration:</p> Node Hostname Target IP Control Plane master-00 192.168.55.10 Agent 1 worker-01 192.168.55.11 Agent 2 worker-02 192.168.55.12"},{"location":"provisioning/2-cluster-deployment-maas/#5-deploying-the-nodes","title":"5. \ud83d\ude80 Deploying the Nodes","text":"<ol> <li>Select Ubuntu 24.04 LTS or your custom image for each node</li> <li>Ensure the static IP from the table above is assigned during deployment</li> <li>After deployment, remember to change boot sequence from PXE to External Disk</li> </ol>"},{"location":"provisioning/2-cluster-deployment-maas/#6-post-deployment-cleanup","title":"6. \ud83e\uddf9 Post-Deployment Cleanup","text":"<p>After deployment, the nodes are running Ubuntu 24.04 with the user <code>ubuntu</code> by default and some MAAS settings.</p>"},{"location":"provisioning/2-cluster-deployment-maas/#user-account-migration-ubuntu-admin","title":"User Account Migration (ubuntu \u2192 admin)","text":"<p>Perform SSH login using <code>ssh ubuntu@&lt;IP_ADDRESS&gt;</code> and execute:</p> <pre><code># Add new user\nsudo adduser admin\n\n# Grant sudo rights to the new user\nsudo usermod -aG sudo admin\n</code></pre> <p>Enable password-less sudo (required for Ansible):</p> <pre><code>sudo visudo\n</code></pre> <p>Add to the end of the file:</p> <pre><code>admin ALL=(ALL) NOPASSWD: ALL\n</code></pre> <p>Copy SSH key to new user and fix ownership/permissions:</p> <pre><code>sudo cp -r /home/ubuntu/.ssh /home/admin/\nsudo chown -R admin:admin /home/admin/.ssh\nsudo chmod 700 /home/admin/.ssh\nsudo chmod 600 /home/admin/.ssh/authorized_keys\n</code></pre>"},{"location":"provisioning/2-cluster-deployment-maas/#switch-to-new-user","title":"Switch to New User","text":"<p>Log out and log back in as the new user:</p> <pre><code>exit\nssh admin@&lt;IP_ADDRESS&gt;\n</code></pre> <p>If everything works fine, delete the ubuntu user:</p> <pre><code>sudo deluser --remove-home ubuntu\n</code></pre>"},{"location":"provisioning/2-cluster-deployment-maas/#change-hostname-optional","title":"Change Hostname (Optional)","text":"<pre><code>sudo hostnamectl set-hostname master-00\n</code></pre>"},{"location":"provisioning/2-cluster-deployment-maas/#remove-maas-apt-proxy-configuration","title":"Remove MAAS APT Proxy Configuration","text":"<pre><code># Remove APT proxy config\nsudo rm -f /etc/apt/apt.conf.d/90curtin-aptproxy\n\n# Remove global proxy environment variables\nsudo sed -i '/maas/d' /etc/environment\nsudo sed -i '/maas/d' /etc/bash.bashrc\n\n# Fix missing packages\nsudo apt update --fix-missing\n</code></pre> <p>Optionally remove duplicate source warnings:</p> <pre><code>sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak\n</code></pre>"},{"location":"provisioning/2-cluster-deployment-maas/#final-system-update","title":"Final System Update","text":"<pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre>"},{"location":"provisioning/3-ssh-configuration/","title":"SSH Configuration","text":"<p>SSH Key Login</p> <p>Using passwords for SSH is generally insecure and cumbersome for frequent access. It is strongly recommended to disable password authentication and switch to cryptographic key pairs for a robust and convenient security model.  </p> <p> SSH-keygen Wikipedia page </p>"},{"location":"provisioning/3-ssh-configuration/#generate-ssh-keys","title":"\ud83d\udd10 Generate SSH Keys","text":""},{"location":"provisioning/3-ssh-configuration/#for-windows-powershell","title":"For Windows (PowerShell)","text":"<p>Generate a new SSH key pair:</p> <pre><code># Generate ED25519 key (recommended)\nssh-keygen -t ed25519 -C \"your_email@example.com\"\n\n# Or RSA key (if ED25519 is not supported)\nssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"\n</code></pre> <p>Default location: <code>C:\\Users\\USER\\.ssh\\id_ed25519</code> (or <code>id_rsa</code>)</p> <p>Steps:</p> <ol> <li>Press Enter to accept the default file location</li> <li>Enter a passphrase (recommended) or leave empty for no passphrase</li> <li>Confirm the passphrase</li> </ol>"},{"location":"provisioning/3-ssh-configuration/#for-linux-wsl","title":"For Linux / WSL","text":"<p>Generate a new SSH key pair:</p> <pre><code># Generate ED25519 key (recommended)\nssh-keygen -t ed25519 -C \"your_email@example.com\"\n\n# Or RSA key (if ED25519 is not supported)\nssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"\n</code></pre> <p>Default location: <code>~/.ssh/id_ed25519</code> (or <code>id_rsa</code>)</p> <p>Steps:</p> <ol> <li>Press Enter to accept the default file location</li> <li>Enter a passphrase (recommended) or leave empty for no passphrase</li> <li>Confirm the passphrase</li> </ol> <p>Set correct permissions:</p> <pre><code>chmod 700 ~/.ssh\nchmod 600 ~/.ssh/id_ed25519\nchmod 644 ~/.ssh/id_ed25519.pub\n</code></pre>"},{"location":"provisioning/3-ssh-configuration/#configure-ssh-agent","title":"\ud83d\udd11 Configure SSH Agent","text":""},{"location":"provisioning/3-ssh-configuration/#for-windows-1011","title":"For Windows 10/11","text":"<p>Set up SSH Agent to auto-start and load your key:</p> <pre><code># Set SSH Agent to start automatically\nGet-Service ssh-agent | Set-Service -StartupType Automatic\n\n# Start the SSH Agent service\nStart-Service ssh-agent\n\n# Add your SSH key\nssh-add C:\\Users\\USER\\.ssh\\id_rsa\n</code></pre>"},{"location":"provisioning/3-ssh-configuration/#for-wsl-or-linux","title":"For WSL or Linux","text":"<p>Note: Windows SSH Agent doesn't work for WSL, so use <code>keychain</code> instead.</p> <p>Install and configure keychain:</p> <pre><code># Install keychain\nsudo apt install keychain\n</code></pre> <p>Add keychain setup to your shell profile (<code>~/.bashrc</code> or <code>~/.zshrc</code>):</p> <pre><code># Add this line to ~/.bashrc or ~/.zshrc\neval $(keychain --eval --quiet id_rsa)\n</code></pre> <p>Reload your shell configuration:</p> <pre><code>source ~/.bashrc\n# or\nsource ~/.zshrc\n</code></pre>"},{"location":"provisioning/3-ssh-configuration/#configure-local-ssh-aliases","title":"\u2699\ufe0f Configure Local SSH Aliases","text":"<p>Works the same for Windows and Linux/WSL.</p> <p>Edit your SSH config file:</p> <ul> <li>Windows: <code>C:\\Users\\USER\\.ssh\\config</code></li> <li>Linux/WSL: <code>~/.ssh/config</code></li> </ul> <p>Add the following configuration:</p> <pre><code># --- HOMELAB NODES ---\nHost master-00\n    HostName 192.168.55.10\n    User admin\n    IdentityFile ~/.ssh/id_rsa\n    ForwardAgent yes\n\nHost worker-01\n    HostName 192.168.55.11\n    User admin\n    IdentityFile ~/.ssh/id_rsa\n    ForwardAgent yes\n\nHost worker-02\n    HostName 192.168.55.12\n    User admin\n    IdentityFile ~/.ssh/id_rsa\n    ForwardAgent yes\n</code></pre> <p>Make sure the permissions are correct:</p> <pre><code>chmod 600 ~/.ssh/config\n</code></pre> <p>Usage:</p> <p>Now you can simply SSH using hostnames:</p> <pre><code>ssh master-00\nssh worker-01\nssh worker-02\n</code></pre>"},{"location":"provisioning/3-ssh-configuration/#configure-hostnames","title":"\ud83d\udcdd Configure Hostnames","text":""},{"location":"provisioning/3-ssh-configuration/#for-windows","title":"For Windows","text":"<p>Open as Administrator: <code>C:\\Windows\\System32\\drivers\\etc\\hosts</code></p> <p>Add the following entries:</p> <pre><code>192.168.55.10    master-00\n192.168.55.11    worker-01\n192.168.55.12    worker-02\n</code></pre>"},{"location":"provisioning/3-ssh-configuration/#for-linux-or-wsl","title":"For Linux or WSL","text":"<p>Edit <code>/etc/hosts</code>:</p> <pre><code>sudo nano /etc/hosts\n</code></pre> <p>Add the following entries:</p> <pre><code>192.168.55.10    master-00\n192.168.55.11    worker-01\n192.168.55.12    worker-02\n</code></pre> <p>Save and exit (<code>Ctrl+X</code>, <code>Y</code>, <code>Enter</code> in nano).</p>"},{"location":"provisioning/3-ssh-configuration/#copy-ssh-key-to-remote-hosts","title":"\ud83d\ude80 Copy SSH Key to Remote Hosts","text":""},{"location":"provisioning/3-ssh-configuration/#using-ssh-copy-id-linuxwsl","title":"Using ssh-copy-id (Linux/WSL)","text":"<pre><code># Copy key to remote host\nssh-copy-id admin@192.168.55.10\nssh-copy-id admin@192.168.55.11\nssh-copy-id admin@192.168.55.12\n</code></pre>"},{"location":"provisioning/3-ssh-configuration/#manual-method-windowslinux","title":"Manual Method (Windows/Linux)","text":"<p>If <code>ssh-copy-id</code> is not available:</p> <pre><code># Display your public key\ncat ~/.ssh/id_rsa.pub\n\n# SSH to the remote host\nssh admin@192.168.55.10\n\n# On the remote host, add the key\nmkdir -p ~/.ssh\necho \"YOUR_PUBLIC_KEY\" &gt;&gt; ~/.ssh/authorized_keys\nchmod 700 ~/.ssh\nchmod 600 ~/.ssh/authorized_keys\nexit\n</code></pre>"},{"location":"provisioning/3-ssh-configuration/#verify-ssh-connection","title":"\u2705 Verify SSH Connection","text":"<p>Test passwordless SSH:</p> <pre><code>ssh master-00\nssh worker-01\nssh worker-02\n</code></pre> <p>If configured correctly, you should connect without entering a password!</p>"},{"location":"troubleshooting/placeholder/","title":"This section is currently under construction.","text":"<p>Status: Zero Issues... For Now.</p> <p>Status Update: I'm currently busy fixing the issues that will eventually be documented here. Stay tuned!</p>"}]}