{"config":{"lang":["en"],"separator":"[\\s\\u200b\\-_,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"[ k C n ]  \ud83c\udfe0  homelab","text":"<p>\"The cloud is just someone else's computer\" \u2013 Ancient IT Proverb</p>"},{"location":"#quick-links","title":"\ud83d\udd17 Quick Links","text":"<ul> <li> Service Status</li> <li> Docker Compose</li> <li> My Home Page</li> </ul>"},{"location":"#whats-this-all-about","title":"\ud83d\udc49 What's This All About?","text":"<p>Hello and welcome! This is my personal homelab documentation \u2013 a living knowledge base where I'm trying to document everything from infrastructure setup to those 3 AM debugging sessions that teach you way too much about Docker networking.</p> <p></p>"},{"location":"#why-self-host","title":"\ud83e\udd14 Why Self-Host?","text":"<p>Reasons I run a homelab:</p> <ol> <li>Fun \u2013 Because it's actually so enjoyable</li> <li>Curiosity - It's amazing to see how things work</li> <li>Learning \u2013 Best way to understand infrastructure</li> <li>Privacy \u2013 My data stays on my hardware</li> <li>Control \u2013 I decide when things update (or break)</li> <li>Cost \u2013 Cloud bills add up fast, even faster than electricity ones</li> </ol>"},{"location":"#the-setup","title":"\ud83c\udfd7\ufe0f The Setup","text":""},{"location":"#documentation-sections","title":"\ud83d\udcc2 Documentation Sections","text":"<p>Browse the documentation by topic:</p> <ul> <li> Infrastructure - Hardware setup, network configuration</li> <li> Provisioning - VM and bare-metal deployment workflows</li> <li> Applications - Docker compose, k8s manifests, service configs</li> <li> Automation - Scripts, workflows, infrastructure as code</li> <li> Troubleshooting - Common issues and their solutions</li> <li> Learning - Tutorials, guides, and useful resources</li> </ul> <p></p>"},{"location":"infrastructure/home/","title":"\ud83c\udfe2 Infrastructure","text":""},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/","title":"\ud83d\udee2\ufe0f MAAS Deployment","text":"<p>Used Prerequisites:</p> <ul> <li>Ubuntu Server: for MAAS Installation</li> <li>Nodes: Three machines (Master, Worker 1, Worker 2) configured for PXE boot</li> </ul>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#maas-deployment-initial-configuration","title":"MAAS Deployment &amp; Initial Configuration","text":""},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#1-maas-core-installation","title":"1. \ud83d\udcbe MAAS Core Installation","text":"<p>Install the MAAS packages and the required database components.</p> <pre><code># Add repository for latest MaaS version\nsudo apt install software-properties-common\nsudo add-apt-repository ppa:maas/3.7\n\n# Update and install the MaaS package\nsudo apt update\nsudo apt install maas</code></pre>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#2-initial-configuration","title":"2. \u2699\ufe0f Initial Configuration","text":"<p>Initialize the MAAS region controller. You will be prompted to choose a user (create a new one).</p> <pre><code>sudo maas init</code></pre>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#3-access-ui","title":"3. \ud83c\udf10 Access UI","text":"<p>Open a web browser and navigate to:</p> <p><code>http://&lt;MAAS_SERVER_IP&gt;:5240/MAAS</code></p> <p>Login: Use the administrator account credentials set during <code>maas init</code></p>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#maas-networking-domain-configuration","title":"MAAS Networking &amp; Domain Configuration","text":""},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#1-disable-dhcp-on-the-vlan","title":"1. \ud83d\uded1 Disable DHCP on the VLAN","text":"<p>By default, MAAS provides DHCP. To avoid conflicts with your router, you must disable the dynamic range and only use MAAS for IP reservations.</p> <p>Steps:</p> <ol> <li>Navigate to Subnets in the MAAS UI</li> <li>Select your primary subnet (e.g., <code>192.168.55.0/24</code>)</li> <li>In the DHCP section, delete the dynamic IP range</li> <li>Ensure the DHCP mode for the VLAN is set to \"Unmanaged\" or that the DHCP range is empty</li> </ol>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#2-configure-domain-and-hostnames","title":"2. \ud83d\udcdd Configure Domain and Hostnames","text":"<p>Set a cleaner domain name and ensure MAAS uses consistent naming conventions.</p> <p>Steps:</p> <ol> <li>Navigate to Settings \u2192 General \u2192 Default DNS suffix</li> <li>Change the default (e.g., <code>maas</code>) to something cleaner (e.g., <code>homelab</code>)</li> <li>In the DNS tab, verify that MAAS is configured to manage DNS records for your domain</li> </ol>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#3-ssh-key-registration","title":"3. \ud83d\udd11 SSH Key Registration","text":"<p>You can securely import your keys directly from GitHub, which is faster than pasting them manually.</p> <p>Steps:</p> <ol> <li>Go to User Account \u2192 My Account</li> <li>In the SSH keys section, choose \"Import from GitHub\"</li> <li>Enter your GitHub username - MAAS will automatically fetch and register all your public keys</li> </ol>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#4-commissioning-and-ip-assignment","title":"4. \u2699\ufe0f Commissioning and IP Assignment","text":"<p>Steps:</p> <ol> <li>Start Nodes: Power on your bare-metal nodes configured for PXE boot</li> <li>Commissioning: MAAS will discover them and perform hardware testing. Once complete, they will transition to the Ready state</li> <li>Static IP Reservation: For each Node, go to its configuration page and set a Static IP Reservation corresponding to its MAC address</li> </ol> <p>My configuration:</p> Node Hostname Target IP Control Plane master-00 192.168.55.10 Agent 1 worker-01 192.168.55.11 Agent 2 worker-02 192.168.55.12"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#5-deploying-the-nodes","title":"5. \ud83d\ude80 Deploying the Nodes","text":"<ol> <li>Select Ubuntu 24.04 LTS or your custom image for each node</li> <li>Ensure the static IP from the table above is assigned during deployment</li> <li>After deployment, remember to change boot sequence from PXE to External Disk</li> </ol>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#6-post-deployment-cleanup","title":"6. \ud83e\uddf9 Post-Deployment Cleanup","text":"<p>After deployment, the nodes are running Ubuntu 24.04 with the user <code>ubuntu</code> by default and some MAAS settings.</p>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#user-account-migration-ubuntu-admin","title":"User Account Migration (ubuntu \u2192 admin)","text":"<p>Perform SSH login using <code>ssh ubuntu@&lt;IP_ADDRESS&gt;</code> and execute:</p> <pre><code># Add new user\nsudo adduser admin\n\n# Grant sudo rights to the new user\nsudo usermod -aG sudo admin</code></pre> <p>Enable password-less sudo (required for Ansible):</p> <pre><code>sudo visudo</code></pre> <p>Add to the end of the file:</p> <pre><code>admin ALL=(ALL) NOPASSWD: ALL</code></pre> <p>Copy SSH key to new user and fix ownership/permissions:</p> <pre><code>sudo cp -r /home/ubuntu/.ssh /home/admin/\nsudo chown -R admin:admin /home/admin/.ssh\nsudo chmod 700 /home/admin/.ssh\nsudo chmod 600 /home/admin/.ssh/authorized_keys</code></pre>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#switch-to-new-user","title":"Switch to New User","text":"<p>Log out and log back in as the new user:</p> <pre><code>exit\nssh admin@&lt;IP_ADDRESS&gt;</code></pre> <p>If everything works fine, delete the ubuntu user:</p> <pre><code>sudo deluser --remove-home ubuntu</code></pre>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#change-hostname-optional","title":"Change Hostname (Optional)","text":"<pre><code>sudo hostnamectl set-hostname master-00</code></pre>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#remove-maas-apt-proxy-configuration","title":"Remove MAAS APT Proxy Configuration","text":"<pre><code># Remove APT proxy config\nsudo rm -f /etc/apt/apt.conf.d/90curtin-aptproxy\n\n# Remove global proxy environment variables\nsudo sed -i '/maas/d' /etc/environment\nsudo sed -i '/maas/d' /etc/bash.bashrc\n\n# Fix missing packages\nsudo apt update --fix-missing</code></pre> <p>Optionally remove duplicate source warnings:</p> <pre><code>sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak</code></pre>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#final-system-update","title":"Final System Update","text":"<pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y</code></pre>"},{"location":"provisioning/Cluster-Deployment/2-ssh-configuration/","title":"\ud83d\udcc4 SSH Configuration","text":""},{"location":"provisioning/Cluster-Deployment/2-ssh-configuration/#configure-ssh-agent","title":"\ud83d\udd11 Configure SSH Agent","text":"<ul> <li>for Windows 10/11</li> </ul> <pre><code># Autostart for SSH Agent\nGet-Service ssh-agent | Set-Service -StartupType Automatic\n# \nStart-Service ssh-agent\n# Add your SSH key\nssh-add C:\\Users\\USER\\.ssh\\id_rsa</code></pre> <ul> <li>for WSL or Linux (Windows SSH Agent doesn't work for WSL)</li> </ul> <pre><code># Install keychain\nsudo apt install keychain \n\n# Add keychain setup to your shell profile ~/.bashrc or ~/.zshrc \neval $(keychain --eval --quiet id_rsa)</code></pre>"},{"location":"provisioning/Cluster-Deployment/2-ssh-configuration/#configure-local-ssh-aliases","title":"\u2699\ufe0f Configure Local SSH Aliases","text":"<p>works the same for Windows and Linux/WSL</p> <p>just modify your <code>C:\\Users\\USER\\.ssh\\config</code> or <code>./ssh/config</code></p> <pre><code># --- HOMELAB NODES ---\nHost master-00\n    HostName 192.168.55.10\n    User admin\n    IdentityFile ~/.ssh/id_rsa\n    ForwardAgent yes\n\nHost worker-01\n    HostName 192.168.55.11\n    User admin\n    IdentityFile ~/.ssh/id_rsa\n    ForwardAgent yes\n\nHost worker-02\n    HostName 192.168.55.12\n    User admin\n    IdentityFile ~/.ssh/id_rsa\n    ForwardAgent yes\n</code></pre> <p>make sure the permissions are correct</p> <pre><code>chmod 600 ~/.ssh/config</code></pre>"},{"location":"provisioning/Cluster-Deployment/2-ssh-configuration/#hostnames","title":"\ud83d\udcdd Hostnames","text":"<ul> <li>For Windows open as Administrator <code>C:\\Windows\\System32\\drivers\\etc\\hosts</code> and add:</li> </ul> <pre><code>192.168.55.10    master-00\n192.168.55.11    worker-01\n192.168.55.12    worker-02</code></pre> <ul> <li>For Linux or WSL <code>/etc/hosts</code></li> </ul>"}]}