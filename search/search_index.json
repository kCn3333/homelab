{"config":{"lang":["en"],"separator":"[\\s\\u200b\\-_,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"[ k C n ]  \ud83c\udfe0  homelab","text":"<p>\"The cloud is just someone else's computer\" \u2013 Ancient IT Proverb</p>"},{"location":"#quick-links","title":"\ud83d\udd17 Quick Links","text":"<ul> <li> Service Status</li> <li> Docker Compose</li> <li> My Home Page</li> </ul>"},{"location":"#whats-this-all-about","title":"\ud83d\udc49 What's This All About?","text":"<p>Hello and welcome! This is my personal homelab documentation \u2013 a living knowledge base where I'm trying to document everything from infrastructure setup to those 3 AM debugging sessions that teach you way too much about Docker networking.</p> <p></p>"},{"location":"#why-self-host","title":"\ud83e\udd14 Why Self-Host?","text":"<p>Reasons I run a homelab:</p> <ol> <li>Fun \u2013 Because it's actually so enjoyable</li> <li>Curiosity - It's amazing to see how things work</li> <li>Learning \u2013 Best way to understand infrastructure</li> <li>Privacy \u2013 My data stays on my hardware</li> <li>Control \u2013 I decide when things update (or break)</li> <li>Cost \u2013 Cloud bills add up fast, even faster than electricity ones</li> </ol>"},{"location":"#the-setup","title":"\ud83c\udfd7\ufe0f The Setup","text":""},{"location":"#documentation-sections","title":"\ud83d\udcda Documentation Sections","text":"<p>Browse the documentation by topic:</p> <ul> <li> Infrastructure - Hardware setup, network configuration</li> <li> Provisioning - VM and bare-metal deployment workflows</li> <li> Applications - Docker Compose files, k8s manifests, service configs</li> <li> Automation - Scripts, workflows, infrastructure as code</li> <li> Troubleshooting - Common issues and their solutions</li> <li> Learning - Tutorials, guides, and useful resources</li> </ul> <p></p>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/","title":"Cluster Deployment using MAAS","text":"<p>Used Prerequisites: - Ubuntu Server: for MAAS Installation - Nodes: Three machines (Master, Worker 1, Worker 2) configured for PXE boot.</p>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#maas-deployment-initial-configuration","title":"MAAS Deployment &amp; Initial Configuration","text":""},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#1-maas-core-installation","title":"1. \ud83d\udcbe MAAS Core Installation","text":"<p>Install the MAAS packages and the required database components.</p> <pre><code># 1. Add repository for latest MaaS version\nsudo apt install software-properties-common\nsudo add-apt-repository ppa:maas/3.7\n\n# 2. Update and install the MaaS package\nsudo apt update\nsudo apt install maas\n</code></pre>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#2-initial-configuration","title":"2. \u2699\ufe0f Initial Configuration","text":"<p>Initialize the MAAS region controller. You will be prompted to choose a user (create a new one) .</p> <pre><code>sudo maas init\n</code></pre>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#3-access-ui","title":"3. \ud83c\udf10 Access UI","text":"<p>Open a web browser and navigate to:</p> <p>http://:5240/MAAS <p>Login: Use the administrator account credentials set during maas init</p>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#maas-networking-domain-configuration","title":"MAAS Networking &amp; Domain Configuration","text":""},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#1-disable-dhcp-on-the-vlan","title":"1. \ud83d\uded1 Disable DHCP on the VLAN","text":"<p>By default, MAAS provides DHCP. To avoid conflicts with your router, you must disable the dynamic range and only use MAAS for IP reservations.</p> <ol> <li> <p>Navigate to Subnets in the MAAS UI.</p> </li> <li> <p>Select your primary subnet (e.g., 192.168.55.0/24).</p> </li> <li> <p>In the DHCP section, delete the dynamic IP range.</p> </li> <li> <p>Ensure the DHCP mode for the VLAN is set to \"Unmanaged\" or that the DHCP range is empty.</p> </li> </ol>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#2-configure-domain-and-hostnames","title":"2. \ud83d\udcdd Configure Domain and Hostnames","text":"<p>Set a cleaner domain name and ensure MAAS uses consistent naming conventions.</p> <ol> <li> <p>Navigate to Settings -&gt; General -&gt; Default DNS suffix. Change the default (e.g., maas) to something cleaner (e.g., homelab).</p> </li> <li> <p>In the DNS tab, verify that MAAS is configured to manage DNS records for your domain.</p> </li> </ol>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#3-ssh-key-registration","title":"3. \ud83d\udd11 SSH Key Registration","text":"<p>You can securely import your keys directly from GitHub, which is faster than pasting them manually.</p> <ol> <li> <p>Go to User Account -&gt; My Account.</p> </li> <li> <p>In the SSH keys section, choose \"Import from GitHub\".</p> </li> <li> <p>Enter your GitHub username. MAAS will automatically fetch and register all your public keys.</p> </li> </ol>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#4-commissioning-and-ip-assignment","title":"4. \u2699\ufe0f Commissioning and IP Assignment","text":"<ol> <li> <p>Start Nodes: Power on your bare-metal nodes configured for PXE boot.</p> </li> <li> <p>Commissioning: MAAS will discover them and perform hardware testing. Once complete, they will transition to the Ready state.</p> </li> <li> <p>Static IP Reservation: For each Node, go to its configuration page and set a Static IP Reservation corresponding to its MAC address.</p> </li> </ol> <p>for me it was :</p> Node hostname target Control Plane master-00 192.168.55.10 Agent 1 worker-01 192.168.55.11 Agent 2 worker-02 192.168.55.12"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#5-deploying-the-nodes","title":"5. \ud83d\ude80 Deploying the Nodes","text":"<p>Select Ubuntu 24.04 LTS or your custom image for each node, ensure the static IP from the table above is assigned during deployment. After that remember to change boot sequence from PXE to External Disk.</p>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#2-post-deployment-cleanup","title":"2. \ud83e\uddf9 Post-Deployment Cleanup","text":"<p>After deployment, the nodes are running Ubuntu 24.04 with the user <code>ubuntu</code> by default and some MAAS settings. </p>"},{"location":"provisioning/Cluster-Deployment/1-cluster-deployment-maas/#perform-ssh-login-using-ssh-ubuntuip_address-and-clean-up","title":"Perform SSH login (using <code>ssh ubuntu@&lt;IP_ADDRESS&gt;</code>) and clean up:","text":"<ol> <li> <p>User Account Migration (ubuntu -&gt; admin) <pre><code># Add new user\nsudo adduser admin\n# Grant sudo rights to the new user\nsudo usermod -aG sudo admin\n\n# Enable password-less sudo (required for Ansible)\nsudo visudo\n# Add to the end of a file\nadmin ALL=(ALL) NOPASSWD: ALL\n\n# Copy SSH key to new user and fix ownership/permissions\nsudo cp -r /home/ubuntu/.ssh /home/admin/\nsudo chown -R admin:admin /home/admin/.ssh\nsudo chmod 700 /home/admin/.ssh\nsudo chmod 600 /home/admin/.ssh/authorized_keys\n</code></pre></p> </li> <li> <p>Log out and log back in as the new user <pre><code>exit\nssh admin@&lt;IP_ADDRESS&gt;\n\n# If works fine, delete ubuntu user\nsudo deluser --remove-home ubuntu\n   ```\n\n4. If you want to change the hostname\n```bash\nsudo hostnamectl set-hostname master-00\n   ```\n---\n\n##### Remove MAAS APT Proxy configuration\n\n```shell\nsudo rm -f /etc/apt/apt.conf.d/90curtin-aptproxy\n# global proxy environment variables (HTTP_PROXY, HTTPS_PROXY)\nsudo sed -i '/maas/d' /etc/environment\nsudo sed -i '/maas/d' /etc/bash.bashrc\n\nsudo apt update --fix-missing\n# Optionally remove duplicate source warnings\nsudo mv /etc/apt/sources.list /etc/apt/sources.list.bak\n</code></pre></p> </li> </ol> <p>and Update system packages <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre></p>"},{"location":"provisioning/Cluster-Deployment/2-ssh-configuration/","title":"SSH Configuration","text":""},{"location":"provisioning/Cluster-Deployment/2-ssh-configuration/#configure-ssh-agent","title":"\ud83d\udd11 Configure SSH Agent","text":"<ul> <li>for Windows 10/11</li> </ul> <p><code>Shell     # Autostart for SSH Agent     Get-Service ssh-agent | Set-Service -StartupType Automatic     #      Start-Service ssh-agent     # Add your SSH key     ssh-add C:\\Users\\USER\\.ssh\\id_rsa</code></p> <ul> <li>for WSL or Linux (Windows SSH Agent doesn't work for WSL) <pre><code># Install keychain\nsudo apt install keychain \n\n# Add keychain setup to your shell profile ~/.bashrc or ~/.zshrc \neval $(keychain --eval --quiet id_rsa)\n</code></pre></li> </ul>"},{"location":"provisioning/Cluster-Deployment/2-ssh-configuration/#configure-local-ssh-aliases","title":"\u2699\ufe0f Configure Local SSH Aliases","text":"<p>works the same for Windows and Linux/WSL</p> <p>modify your <code>C:\\Users\\USER\\.ssh\\config</code> or <code>./ssh/config</code></p> <pre><code># --- HOMELAB NODES ---\nHost master-00\n    HostName 192.168.55.10\n    User admin\n    IdentityFile ~/.ssh/id_rsa\n    ForwardAgent yes\n\nHost worker-01\n    HostName 192.168.55.11\n    User admin\n    IdentityFile ~/.ssh/id_rsa\n    ForwardAgent yes\n\nHost worker-02\n    HostName 192.168.55.12\n    User admin\n    IdentityFile ~/.ssh/id_rsa\n    ForwardAgent yes\n</code></pre> <pre><code>chmod 600 ~/.ssh/config\n</code></pre>"},{"location":"provisioning/Cluster-Deployment/2-ssh-configuration/#hostnames","title":"\ud83d\udcdd Hostnames","text":"<ul> <li> <p>For Windows open as Administrator <code>C:\\Windows\\System32\\drivers\\etc\\hosts</code> and add: <pre><code>192.168.55.10    master-00\n192.168.55.11    worker-01\n192.168.55.12    worker-02\n</code></pre></p> </li> <li> <p>For Linux or WSL <code>/etc/hosts</code></p> </li> </ul>"}]}